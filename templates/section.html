<div class="container py-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>{{ section_name }}</h2>
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">Back</a>
  </div>
  <div class="row g-3 justify-content-center">
    {% for ent in entities %}
    <div class="col-12 col-sm-6 d-flex justify-content-center">
      {% if ent.entity_id.startswith('camera.') %}
      <video controls autoplay muted style="width:100%; border-radius:10px; margin-bottom:1rem;">
        <source src="{{ session['ha_url'] }}/api/camera_proxy_stream/{{ ent.entity_id }}?token={{ session['ha_token'] }}" type="video/mp4">
      </video>
      <p class="text-center">{{ ent.name }}</p>
      {% else %}
      <button id="{{ ent.entity_id }}" data-name="{{ ent.name }}"
        class="btn btn-lg w-100 mb-2 {% if ent.state=='on' or ent.state=='open' or ent.state=='unlocked' %}btn-warning{% else %}btn-secondary{% endif %}"
        onclick="toggleEntity('{{ ent.entity_id }}', this)">
        {{ ent.name }} - {% if ent.state=='on' or ent.state=='open' or ent.state=='unlocked' %}ON{% else %}OFF{% endif %}
      </button>
      {% endif %}
    </div>
    {% endfor %}
  </div>
</div>
